---
title: Gerir pagamentos usando a API do Serviço de Pagamento
description: Saiba como utilizar o Partner Center Payout Service API para aceder aos dados do pagamento
ms.date: 06/23/2021
ms.service: partner-dashboard
ms.subservice: partnercenter-sdk
author: jasongroce
ms.author: sabaja
ms.openlocfilehash: 014a1e6a14b538b7557d58710b9132dd9e37de21
ms.sourcegitcommit: 7e2d2805c4cdd61785b1cdcca99cad10d5683153
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 07/10/2021
ms.locfileid: "113592455"
---
# <a name="manage-payouts-using-the-payout-service-api"></a><span data-ttu-id="a596d-103">Gerir pagamentos usando a API do Serviço de Pagamento</span><span class="sxs-lookup"><span data-stu-id="a596d-103">Manage payouts using the Payout Service API</span></span>

<span data-ttu-id="a596d-104">Este artigo explica como pode aceder aos dados do pagamento através das APIs do Serviço de Pagamento em vez da UI do Partner Center.</span><span class="sxs-lookup"><span data-stu-id="a596d-104">This article explains how you can access payout data through the Payout Service APIs instead of the Partner Center UI.</span></span> <span data-ttu-id="a596d-105">Estas APIs fornecem uma forma programática de fornecer a capacidade da funcionalidade de [dados de Exportação](https://partner.microsoft.com/dashboard/payouts/reports/incentiveexport) no Partner Center.</span><span class="sxs-lookup"><span data-stu-id="a596d-105">These APIs provide a programmatic way to provide the capability of the [Export data](https://partner.microsoft.com/dashboard/payouts/reports/incentiveexport) feature in Partner Center.</span></span>

## <a name="available-apis"></a><span data-ttu-id="a596d-106">APIs disponíveis</span><span class="sxs-lookup"><span data-stu-id="a596d-106">Available APIs</span></span>

<span data-ttu-id="a596d-107">Consulte todas as APIs disponíveis nos [Pagamentos de Parceiros.](/rest/api/partner-center/partner-payouts)</span><span class="sxs-lookup"><span data-stu-id="a596d-107">See all available APIs at [Partner Payouts](/rest/api/partner-center/partner-payouts).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a596d-108">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="a596d-108">Prerequisites</span></span>

- <span data-ttu-id="a596d-109">[Registe uma aplicação com AAD/Microsoft Identity](/graph/auth-register-app-v2) no portal Azure e adicione os proprietários e funções apropriados à aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-109">[Register an application with AAD/Microsoft Identity](/graph/auth-register-app-v2) in the Azure portal, and add appropriate owners and roles to the application.</span></span>
- <span data-ttu-id="a596d-110">Instale [Visual Studio](https://visualstudio.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="a596d-110">Install [Visual Studio](https://visualstudio.microsoft.com/downloads/).</span></span>

## <a name="register-an-application-with-the-microsoft-identity-platform"></a><span data-ttu-id="a596d-111">Registar uma aplicação na plataforma de identidade da Microsoft</span><span class="sxs-lookup"><span data-stu-id="a596d-111">Register an application with the Microsoft identity platform</span></span>

<span data-ttu-id="a596d-112">O [plataforma de identidades da Microsoft](/azure/active-directory/develop/v2-overview) ajuda-o a construir aplicações que os seus utilizadores e clientes podem iniciar sação para utilizar as suas identidades ou contas sociais da Microsoft, e fornecer acesso autorizado às suas próprias APIs ou APIs da Microsoft, como a Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="a596d-112">The [Microsoft identity platform](/azure/active-directory/develop/v2-overview) helps you build applications your users and customers can sign in to using their Microsoft identities or social accounts, and provide authorized access to your own APIs or Microsoft APIs like Microsoft Graph.</span></span>

1. <span data-ttu-id="a596d-113">Inicie sessão no [portal do Azure](https://portal.azure.com/) com uma conta profissional ou escolar ou uma conta pessoal da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a596d-113">Sign in to the [Azure portal](https://portal.azure.com/) using either a work or school account or a personal Microsoft account.</span></span>

   <span data-ttu-id="a596d-114">Se a sua conta lhe der acesso a mais de um inquilino, selecione a sua conta no canto superior direito e desa cosite a sua sessão de portal para o inquilino AD AZure correto.</span><span class="sxs-lookup"><span data-stu-id="a596d-114">If your account gives you access to more than one tenant, select your account in the upper right corner and set your portal session to the correct Azure AD tenant.</span></span>

2. <span data-ttu-id="a596d-115">No painel de navegação à esquerda, selecione o serviço Azure Ative Directory, depois **as inscrições da App,** depois **nova inscrição.**</span><span class="sxs-lookup"><span data-stu-id="a596d-115">In the left navigation pane, select the Azure Active Directory service, then **App registrations**, then **New registration**.</span></span> <span data-ttu-id="a596d-116">Aparece a página **de inscrição do Registo.**</span><span class="sxs-lookup"><span data-stu-id="a596d-116">The **Register an application** page appears.</span></span>

   :::image type="content" source="./images/manage-payouts/new-app-registration.png" alt-text="Screenshot mostrando ao Registo um ecrã de aplicação no portal Azure.":::

3. <span data-ttu-id="a596d-118">Insira as informações de registo do seu pedido:</span><span class="sxs-lookup"><span data-stu-id="a596d-118">Enter your application's registration information:</span></span>

   - <span data-ttu-id="a596d-119">Nome: Introduza um nome significativo da aplicação que será apresentado aos utilizadores da aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-119">Name: Enter a meaningful application name that will be displayed to users of the app.</span></span>
   - <span data-ttu-id="a596d-120">Tipos de conta suportados: Selecione quais as contas que a sua candidatura irá suportar.</span><span class="sxs-lookup"><span data-stu-id="a596d-120">Supported account types: Select which accounts your application will support.</span></span>

    | <span data-ttu-id="a596d-121">**Tipos de conta suportados**</span><span class="sxs-lookup"><span data-stu-id="a596d-121">**Supported account types**</span></span>                             | <span data-ttu-id="a596d-122">**Descrição**</span><span class="sxs-lookup"><span data-stu-id="a596d-122">**Description**</span></span>                                                                                            |
    |---------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="a596d-123">Apenas contas neste diretório organizacional</span><span class="sxs-lookup"><span data-stu-id="a596d-123">Only accounts in this organizational directory</span></span>          | <span data-ttu-id="a596d-124">Selecione esta opção se estiver a criar uma aplicação de linha de negócio (LOB).</span><span class="sxs-lookup"><span data-stu-id="a596d-124">Select this option if you're building a line-of-business (LOB) application.</span></span> <span data-ttu-id="a596d-125">Esta opção não está disponível se não estiver a registar a aplicação num diretório.</span><span class="sxs-lookup"><span data-stu-id="a596d-125">This option is not available if you're not registering the application in a directory.</span></span> <span data-ttu-id="a596d-126">Esta opção mapeia para o inquilino único do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a596d-126">This option maps to Azure AD only single-tenant.</span></span>  <span data-ttu-id="a596d-127">Esta opção é o padrão, a menos que esteja a registar a aplicação fora de um diretório.</span><span class="sxs-lookup"><span data-stu-id="a596d-127">This option is the default unless you're registering the app outside of a directory.</span></span> <span data-ttu-id="a596d-128">Nos casos em que a aplicação é registada fora de um diretório, a predefinição é contas da Microsoft pessoais e de multi-inquilino do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a596d-128">In cases where the app is registered outside of a directory, the default is Azure AD multi-tenant and personal Microsoft accounts.</span></span>             |
    | <span data-ttu-id="a596d-129">Contas em qualquer diretório organizacional</span><span class="sxs-lookup"><span data-stu-id="a596d-129">Accounts in any organizational directory</span></span>                | <span data-ttu-id="a596d-130">Selecione esta opção se quiser visar todos os clientes comerciais ou pedagógicos.</span><span class="sxs-lookup"><span data-stu-id="a596d-130">Select this option if you would like to target all business and educational customers.</span></span>  <span data-ttu-id="a596d-131">Esta opção mapeia para um multi-inquilino único do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a596d-131">This option maps to an Azure AD only multi-tenant.</span></span> <span data-ttu-id="a596d-132">Se registou a aplicação como inquilino único do Azure AD, pode atualizá-la para multi-inquilino do Azure AD e voltar ao inquilino único através do painel Autenticação.</span><span class="sxs-lookup"><span data-stu-id="a596d-132">If you registered the app as Azure AD only single-tenant, you can update it to be Azure AD multi-tenant and back to single-tenant through the Authentication blade.</span></span>                                                                                                                                                  |
    | <span data-ttu-id="a596d-133">Contas em qualquer diretório organizacional e contas Microsoft pessoais</span><span class="sxs-lookup"><span data-stu-id="a596d-133">Accounts in any organizational directory and personal Microsoft accounts</span></span> | <span data-ttu-id="a596d-134">Selecione esta opção para visar o maior conjunto de clientes.</span><span class="sxs-lookup"><span data-stu-id="a596d-134">Select this option to target the widest set of customers.</span></span> <span data-ttu-id="a596d-135">Esta opção mapeia para contas da Microsoft pessoais e de multi-inquilino do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a596d-135">This option maps to Azure AD multi-tenant and personal Microsoft accounts.</span></span>  <span data-ttu-id="a596d-136">Se registou a aplicação como multi-inquilino e contas pessoais da Microsoft, não poderá alterar esta seleção na UI.</span><span class="sxs-lookup"><span data-stu-id="a596d-136">If you registered the app as Azure AD multi-tenant and personal Microsoft accounts, you cannot change this selection in the UI.</span></span> <span data-ttu-id="a596d-137">Em vez disso, tem de utilizar o editor de manifesto de aplicação para alterar os tipos de conta suportados.</span><span class="sxs-lookup"><span data-stu-id="a596d-137">Instead, you must use the application manifest editor to change the supported account types.</span></span>                                                                          |

   - <span data-ttu-id="a596d-138">*(opcional)* Redirecione URI: Selecione o tipo de aplicação que está a construir, cliente Web ou Público (mobile & desktop) e, em seguida, introduza o URI de redirecionamento (ou URL de resposta) para a sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-138">*(optional)* Redirect URI: Select the type of app you're building, Web or Public client (mobile & desktop), and then enter the redirect URI (or reply URL) for your application.</span></span> <span data-ttu-id="a596d-139">(O URL de redirecionamento é para onde a resposta de autenticação será enviada após a autenticação do utilizador.)</span><span class="sxs-lookup"><span data-stu-id="a596d-139">(The redirect URL is where the authentication response will be sent after the user authenticates.)</span></span> 

      <span data-ttu-id="a596d-140">Para aplicações Web, indique o URL base da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-140">For web applications, provide the base URL of your app.</span></span> <span data-ttu-id="a596d-141">Por exemplo, `http://localhost:31544` pode ser o URL de uma aplicação Web em execução no seu computador local.</span><span class="sxs-lookup"><span data-stu-id="a596d-141">For example, `http://localhost:31544` might be the URL for a web app running on your local machine.</span></span> <span data-ttu-id="a596d-142">Os utilizadores utilizariam este URL para iniciar sessão numa aplicação de cliente Web.</span><span class="sxs-lookup"><span data-stu-id="a596d-142">Users would use this URL to sign in to a web client application.</span></span>
      <span data-ttu-id="a596d-143">Para aplicações cliente públicas, indique o URI utilizado pelo Azure AD para devolver respostas de token.</span><span class="sxs-lookup"><span data-stu-id="a596d-143">For public client applications, provide the URI used by Azure AD to return token responses.</span></span> <span data-ttu-id="a596d-144">Introduza um valor específico para a aplicação, por exemplo `myapp://auth`.</span><span class="sxs-lookup"><span data-stu-id="a596d-144">Enter a value specific to your application, such as `myapp://auth`.</span></span>

4. <span data-ttu-id="a596d-145">Selecione **Registar**.</span><span class="sxs-lookup"><span data-stu-id="a596d-145">Select **Register**.</span></span> <span data-ttu-id="a596d-146">A Azure AD atribui um ID de aplicação único (cliente) à sua aplicação, e as cargas de página geral da aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-146">Azure AD assigns a unique application (client) ID to your application, and the application's overview page loads.</span></span>

   :::image type="content" source="./images/manage-payouts/register-an-application.png" alt-text=">de texto alt<":::

5. <span data-ttu-id="a596d-148">Se quiser adicionar capacidades à sua aplicação, pode selecionar outras opções de configuração, incluindo branding, certificados e segredos, permissões API e muito mais.</span><span class="sxs-lookup"><span data-stu-id="a596d-148">If you want to add capabilities to your application, you can select other configuration options including branding, certificates and secrets, API permissions, and more.</span></span>

## <a name="platform-specific-properties"></a><span data-ttu-id="a596d-149">Propriedades específicas da plataforma</span><span class="sxs-lookup"><span data-stu-id="a596d-149">Platform-specific properties</span></span>

<span data-ttu-id="a596d-150">A tabela a seguir mostra as propriedades que precisa de configurar e copiar para diferentes tipos de apps.</span><span class="sxs-lookup"><span data-stu-id="a596d-150">The following table shows the properties that you need to configure and copy for different kinds of apps.</span></span> <span data-ttu-id="a596d-151">**Atribuído** significa que deve utilizar o valor atribuído pela Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a596d-151">**Assigned** means that you should use the value assigned by Azure AD.</span></span>

| <span data-ttu-id="a596d-152">Tipo de aplicação</span><span class="sxs-lookup"><span data-stu-id="a596d-152">App type</span></span>              | <span data-ttu-id="a596d-153">Plataforma</span><span class="sxs-lookup"><span data-stu-id="a596d-153">Platform</span></span> | <span data-ttu-id="a596d-154">ID da Aplicação (cliente)</span><span class="sxs-lookup"><span data-stu-id="a596d-154">Application (client) ID</span></span> | <span data-ttu-id="a596d-155">Segredo do Cliente</span><span class="sxs-lookup"><span data-stu-id="a596d-155">Client Secret</span></span> | <span data-ttu-id="a596d-156">Redirecionar URI/URL</span><span class="sxs-lookup"><span data-stu-id="a596d-156">Redirect URI/URL</span></span> | <span data-ttu-id="a596d-157">Flow implícito</span><span class="sxs-lookup"><span data-stu-id="a596d-157">Implicit Flow</span></span>                                                         |
|-----------------------|----------|-------------------------|---------------|------------------|-----------------------------------------------------------------------|
| <span data-ttu-id="a596d-158">Nativo/Móvel</span><span class="sxs-lookup"><span data-stu-id="a596d-158">Native/Mobile</span></span>         | <span data-ttu-id="a596d-159">Nativa</span><span class="sxs-lookup"><span data-stu-id="a596d-159">Native</span></span>   | <span data-ttu-id="a596d-160">Atribuído</span><span class="sxs-lookup"><span data-stu-id="a596d-160">Assigned</span></span>                | <span data-ttu-id="a596d-161">No</span><span class="sxs-lookup"><span data-stu-id="a596d-161">No</span></span>            | <span data-ttu-id="a596d-162">Atribuído</span><span class="sxs-lookup"><span data-stu-id="a596d-162">Assigned</span></span>         | <span data-ttu-id="a596d-163">No</span><span class="sxs-lookup"><span data-stu-id="a596d-163">No</span></span>                                                                    |
| <span data-ttu-id="a596d-164">Aplicação Web</span><span class="sxs-lookup"><span data-stu-id="a596d-164">Web App</span></span>               | <span data-ttu-id="a596d-165">Web</span><span class="sxs-lookup"><span data-stu-id="a596d-165">Web</span></span>      | <span data-ttu-id="a596d-166">Atribuído</span><span class="sxs-lookup"><span data-stu-id="a596d-166">Assigned</span></span>                | <span data-ttu-id="a596d-167">Yes</span><span class="sxs-lookup"><span data-stu-id="a596d-167">Yes</span></span>           | <span data-ttu-id="a596d-168">Yes</span><span class="sxs-lookup"><span data-stu-id="a596d-168">Yes</span></span>              | <span data-ttu-id="a596d-169">O ID aberto opcional Ligação o middleware usa o fluxo híbrido por padrão (Sim)</span><span class="sxs-lookup"><span data-stu-id="a596d-169">Optional Open ID Connect middleware uses hybrid flow by default (Yes)</span></span> |
| <span data-ttu-id="a596d-170">App de página única (SPA)</span><span class="sxs-lookup"><span data-stu-id="a596d-170">Single Page App (SPA)</span></span> | <span data-ttu-id="a596d-171">Web</span><span class="sxs-lookup"><span data-stu-id="a596d-171">Web</span></span>      | <span data-ttu-id="a596d-172">Atribuído</span><span class="sxs-lookup"><span data-stu-id="a596d-172">Assigned</span></span>                | <span data-ttu-id="a596d-173">Yes</span><span class="sxs-lookup"><span data-stu-id="a596d-173">Yes</span></span>           | <span data-ttu-id="a596d-174">Yes</span><span class="sxs-lookup"><span data-stu-id="a596d-174">Yes</span></span>              | <span data-ttu-id="a596d-175">Sim SPAs usar ID aberto Ligação Flow implícito</span><span class="sxs-lookup"><span data-stu-id="a596d-175">Yes SPAs use Open ID Connect implicit Flow</span></span>                            |
| <span data-ttu-id="a596d-176">Serviço/Daemon</span><span class="sxs-lookup"><span data-stu-id="a596d-176">Service/Daemon</span></span>        | <span data-ttu-id="a596d-177">Web</span><span class="sxs-lookup"><span data-stu-id="a596d-177">Web</span></span>      | <span data-ttu-id="a596d-178">Atribuído</span><span class="sxs-lookup"><span data-stu-id="a596d-178">Assigned</span></span>                | <span data-ttu-id="a596d-179">Yes</span><span class="sxs-lookup"><span data-stu-id="a596d-179">Yes</span></span>           | <span data-ttu-id="a596d-180">Yes</span><span class="sxs-lookup"><span data-stu-id="a596d-180">Yes</span></span>              | <span data-ttu-id="a596d-181">No</span><span class="sxs-lookup"><span data-stu-id="a596d-181">No</span></span>                                                                    |

## <a name="create-a-service-principal"></a><span data-ttu-id="a596d-182">Criar um principal de serviço</span><span class="sxs-lookup"><span data-stu-id="a596d-182">Create a service principal</span></span>

<span data-ttu-id="a596d-183">Para aceder aos recursos na sua subscrição, tem de atribuir uma função à aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-183">To access resources in your subscription, you must assign a role to the application.</span></span> <span data-ttu-id="a596d-184">Para ajudar a decidir qual o papel que oferece as permissões certas para a aplicação, consulte [as funções incorporadas do Azure.](/azure/role-based-access-control/built-in-roles)</span><span class="sxs-lookup"><span data-stu-id="a596d-184">For help deciding which role offers the right permissions for the application, see [Azure built-in roles](/azure/role-based-access-control/built-in-roles).</span></span>

> [!NOTE]
> <span data-ttu-id="a596d-185">Pode definir o âmbito ao nível da subscrição, grupo de recursos ou recurso.</span><span class="sxs-lookup"><span data-stu-id="a596d-185">You can set the scope at the level of the subscription, resource group, or resource.</span></span> <span data-ttu-id="a596d-186">As permissões são herdadas para níveis mais baixos de âmbito.</span><span class="sxs-lookup"><span data-stu-id="a596d-186">Permissions are inherited to lower levels of scope.</span></span> <span data-ttu-id="a596d-187">Por exemplo, adicionar uma aplicação à função Reader para um grupo de recursos significa que pode ler o grupo de recursos e quaisquer recursos que contenha.</span><span class="sxs-lookup"><span data-stu-id="a596d-187">For example, adding an application to the Reader role for a resource group means it can read the resource group and any resources it contains.</span></span>

1. <span data-ttu-id="a596d-188">No portal Azure, selecione o nível de âmbito para atribuir a aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-188">In the Azure portal, select the level of scope to assign the application to.</span></span> <span data-ttu-id="a596d-189">Por exemplo, para atribuir uma função no âmbito de subscrição, procurar e selecionar **Subscrições**, ou selecionar **Subscrições** na página inicial.</span><span class="sxs-lookup"><span data-stu-id="a596d-189">For example, to assign a role at the subscription scope, search for and select **Subscriptions**, or select **Subscriptions** on the home page.</span></span>

   :::image type="content" source="./images/manage-payouts/search-for-subscriptions.png" alt-text="Screenshot mostrando a pesquisa do ecrã de Subscrições.":::

2. <span data-ttu-id="a596d-191">Selecione a subscrição para atribuir o pedido.</span><span class="sxs-lookup"><span data-stu-id="a596d-191">Select the subscription to assign the application to.</span></span>

   :::image type="content" source="./images/manage-payouts/internal-testing-subscription.png" alt-text="Screenshot mostrando o ecrã de subscrições com bandeira de teste interno definido para verdadeiro.":::

> [!NOTE]
> <span data-ttu-id="a596d-193">Se não vir a subscrição que procura, selecione o filtro global de subscrições e certifique-se de que a subscrição desejada está selecionada para o portal.</span><span class="sxs-lookup"><span data-stu-id="a596d-193">If you don't see the subscription you're looking for, select the global subscriptions filter and ensure the subscription you want is selected for the portal.</span></span>

3. <span data-ttu-id="a596d-194">Selecione **o controlo de acesso (IAM)** e, em seguida, selecione Adicionar a atribuição de **função**.</span><span class="sxs-lookup"><span data-stu-id="a596d-194">Select **Access control (IAM)**, and then select **Add role assignment**.</span></span>

4. <span data-ttu-id="a596d-195">Selecione a função que deseja atribuir à aplicação.</span><span class="sxs-lookup"><span data-stu-id="a596d-195">Select the role you wish to assign to the application.</span></span> <span data-ttu-id="a596d-196">Por exemplo, para permitir que a aplicação execute ações como reiniciar, iniciar e parar instâncias, selecione a função Contribuinte.</span><span class="sxs-lookup"><span data-stu-id="a596d-196">For example, to allow the application to execute actions like reboot, start and stop instances, select the Contributor role.</span></span> <span data-ttu-id="a596d-197">Leia mais sobre [as funções disponíveis.](/azure/role-based-access-control/built-in-roles)</span><span class="sxs-lookup"><span data-stu-id="a596d-197">Read more about [available roles](/azure/role-based-access-control/built-in-roles).</span></span>

   <span data-ttu-id="a596d-198">Por predefinição, as aplicações AD do Azure não são apresentadas nas opções disponíveis.</span><span class="sxs-lookup"><span data-stu-id="a596d-198">By default, Azure AD applications aren't displayed in the available options.</span></span> <span data-ttu-id="a596d-199">Para encontrar a sua aplicação, procure no nome e selecione-o a partir dos resultados.</span><span class="sxs-lookup"><span data-stu-id="a596d-199">To find your application, search on the name and select it from the results.</span></span> <span data-ttu-id="a596d-200">Na imagem abaixo, `example-app` está a aplicação AAD que registou.</span><span class="sxs-lookup"><span data-stu-id="a596d-200">In the below screenshot, `example-app` is the AAD app you registered.</span></span>

   :::image type="content" source="./images/manage-payouts/add-role-assignment.png" alt-text="Screenshot mostrando a interface do utilizador para adicionar uma atribuição de função para uma aplicação de teste.":::

5. <span data-ttu-id="a596d-202">Selecione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="a596d-202">Select **Save**.</span></span> <span data-ttu-id="a596d-203">Pode então ver a sua aplicação na lista de utilizadores com uma função para esse âmbito.</span><span class="sxs-lookup"><span data-stu-id="a596d-203">You can then see your application in the list of users with a role for that scope.</span></span>

   <span data-ttu-id="a596d-204">Pode começar a usar o seu principal de serviço para executar os seus scripts ou aplicações.</span><span class="sxs-lookup"><span data-stu-id="a596d-204">You can start using your service principal to run your scripts or apps.</span></span> <span data-ttu-id="a596d-205">Para gerir as permissões do seu principal serviço, consulte o estado de consentimento do utilizador, reveja permissões, consulte informações de inscrição e muito mais), consulte as suas aplicações Enterprise no [portal Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a596d-205">To manage your service principal's permissions, see user consent status, review permissions, see sign-in information, and more), view your Enterprise applications in the [Azure portal](https://portal.azure.com).</span></span>

## <a name="set-up-api-permissions"></a><span data-ttu-id="a596d-206">Configurar permissões API</span><span class="sxs-lookup"><span data-stu-id="a596d-206">Set up API permissions</span></span>

<span data-ttu-id="a596d-207">Esta secção fornece instruções sobre como configurar as permissões de API necessárias.</span><span class="sxs-lookup"><span data-stu-id="a596d-207">This section provides instruction on how to set up the required API permissions.</span></span> <span data-ttu-id="a596d-208">Para obter mais informações sobre a configuração das permissões de API do Partner Center, consulte [a autenticação da API do Parceiro.](/partner/develop/api-authentication)</span><span class="sxs-lookup"><span data-stu-id="a596d-208">For more information about setting up Partner Center API permissions, see [Partner API authentication](/partner/develop/api-authentication).</span></span>

<span data-ttu-id="a596d-209">**Conceder autorização para Graph API**</span><span class="sxs-lookup"><span data-stu-id="a596d-209">**Grant permission to Graph API**</span></span>

1. <span data-ttu-id="a596d-210">Abra as [inscrições](https://go.microsoft.com/fwlink/?linkid=2083908) da App no portal Azure.</span><span class="sxs-lookup"><span data-stu-id="a596d-210">Open the [App registrations](https://go.microsoft.com/fwlink/?linkid=2083908) in the Azure portal.</span></span>

2. <span data-ttu-id="a596d-211">Selecione uma aplicação ou [crie uma aplicação](/azure/active-directory/develop/quickstart-register-app) se ainda não tiver uma.</span><span class="sxs-lookup"><span data-stu-id="a596d-211">Select an application, or [create an app](/azure/active-directory/develop/quickstart-register-app) if you don't already have one.</span></span>

3. <span data-ttu-id="a596d-212">Na página geral da aplicação, em **Gestão,** selecione **Permissões API,** em seguida, **Adicione uma permissão**.</span><span class="sxs-lookup"><span data-stu-id="a596d-212">On the application's Overview page, under **Manage**, select **API Permissions**, then **Add a permission**.</span></span>

4. <span data-ttu-id="a596d-213">Selecione **Microsoft Graph** da lista de APIs disponíveis.</span><span class="sxs-lookup"><span data-stu-id="a596d-213">Select **Microsoft Graph** from the list of available APIs.</span></span>

5. <span data-ttu-id="a596d-214">Selecione **permissões delegadas** e adicione permissões necessárias.</span><span class="sxs-lookup"><span data-stu-id="a596d-214">Select **Delegated permissions** and add required permissions.</span></span> <span data-ttu-id="a596d-215">Para mais informações, consulte [o acesso à aplicação Configure.](/azure/active-directory/develop/quickstart-configure-app-access-web-apis)</span><span class="sxs-lookup"><span data-stu-id="a596d-215">For more information, see [Configure app access](/azure/active-directory/develop/quickstart-configure-app-access-web-apis).</span></span>

   :::image type="content" source="./images/manage-payouts/graph-request-api-permissions.png" alt-text="Screenshot mostrando o ecrã de permissões de pedido no portal Azure com a Microsoft Graph selecionado.":::

<span data-ttu-id="a596d-217">**Consentimento para acesso da API ao Partner Center API através da app AAD**</span><span class="sxs-lookup"><span data-stu-id="a596d-217">**Consent to API access to Partner Center API via AAD app**</span></span>

6. <span data-ttu-id="a596d-218">Para a sua aplicação, selecione **permissões API**, então, a partir do ecrã de permissões da API request, selecione **Adicionar uma permissão**, em **seguida, APIs a minha organização usa**.</span><span class="sxs-lookup"><span data-stu-id="a596d-218">For your application, select **API permissions**, then, from the Request API permissions screen, select **Add a permission**, then **APIs my organization uses**.</span></span>

7. <span data-ttu-id="a596d-219">Pesquisa rumo à **Microsoft Partner (Microsoft Dev Center) API (4990cffe-04e8-4e8b-808a-1175604b879f)**.</span><span class="sxs-lookup"><span data-stu-id="a596d-219">Search for **Microsoft Partner (Microsoft Dev Center) API (4990cffe-04e8-4e8b-808a-1175604b879f)**.</span></span>

   :::image type="content" source="./images/manage-payouts/partner-api-request-permissions.png" alt-text="Screenshot mostrando o ecrã de permissões API com o Microsoft Partner selecionado.":::

8. <span data-ttu-id="a596d-221">Desa estade as permissões delegadas no **Centro de Parceiros.**</span><span class="sxs-lookup"><span data-stu-id="a596d-221">Set the Delegated Permissions to **Partner Center**.</span></span>

   :::image type="content" source="./images/manage-payouts/partner-api-request-permissions.png" alt-text="Screenshot mostrando as permissões delegadas selecionadas para Partner Center no ecrã de permissões da API de pedido.":::

9. <span data-ttu-id="a596d-223">Conceder **consentimento para as** APIs.</span><span class="sxs-lookup"><span data-stu-id="a596d-223">Grant **Admin consent** for the APIs.</span></span>

   :::image type="content" source="./images/manage-payouts/api-permissions.png" alt-text="Screenshot mostrando o toggle para consentimento de administrador no ecrã de permissões API.":::

   <span data-ttu-id="a596d-225">Verifique se o consentimento do Administrador está ativado no ecrã de estado do consentimento do Administrador.</span><span class="sxs-lookup"><span data-stu-id="a596d-225">Verify that Admin consent is enabled in the Admin consent status screen.</span></span>

   :::image type="content" source="./images/manage-payouts/admin-consent-verification.png" alt-text="Screenshot mostrando o ecrã de estado do consentimento do administrador":::

10. <span data-ttu-id="a596d-227">Na secção **autenticação,** certifique-se de que a opção **de fluxos de cliente público** está definida para **Sim**.</span><span class="sxs-lookup"><span data-stu-id="a596d-227">In the **Authentication** section, make sure the **Allow public client flows** option is set to **Yes**.</span></span>

    :::image type="content" source="./images/manage-payouts/allow-public-client-flows.png" alt-text="Screenshot mostrando o ecrã de autenticação com Permitir fluxos de clientes públicos definidos para Sim.":::

## <a name="run-the-sample-code-in-visual-studio"></a><span data-ttu-id="a596d-229">Executar o código de amostra em Visual Studio</span><span class="sxs-lookup"><span data-stu-id="a596d-229">Run the sample code in Visual Studio</span></span>

<span data-ttu-id="a596d-230">O código de amostra que mostra como a API pode ser usada para o histórico de pagamentos e transações [encontra-se no partner-Center-Payout-APIs](https://github.com/microsoft/Partner-Center-Payout-APIs) GitHub repo.</span><span class="sxs-lookup"><span data-stu-id="a596d-230">Sample code showing how the API can be used for payment and transaction history be found in the [Partner-Center-Payout-APIs](https://github.com/microsoft/Partner-Center-Payout-APIs) GitHub repo.</span></span>

### <a name="sample-code-notes"></a><span data-ttu-id="a596d-231">Notas de código de amostra</span><span class="sxs-lookup"><span data-stu-id="a596d-231">Sample code notes</span></span>

- <span data-ttu-id="a596d-232">A configuração dos segredos e certificados do Cliente, tal como discutido na Autenticação: Não é necessária duas opções de [como criar um principal de serviço no portal Azure.](/azure/active-directory/develop/howto-create-service-principal-portal)</span><span class="sxs-lookup"><span data-stu-id="a596d-232">Configuration of Client secrets and Certificates as discussed in the Authentication: Two options section of [How to create a service principal in the Azure portal](/azure/active-directory/develop/howto-create-service-principal-portal) is not required.</span></span>
- <span data-ttu-id="a596d-233">As contas com autenticação multifactor (MFA) não são suportadas atualmente e causarão um erro.</span><span class="sxs-lookup"><span data-stu-id="a596d-233">Accounts with multifactor authentication (MFA) are not currently supported and will cause an error.</span></span>
- <span data-ttu-id="a596d-234">A API de pagamento suporta apenas credenciais baseadas no utilizador/palavra-passe.</span><span class="sxs-lookup"><span data-stu-id="a596d-234">Payout API only supports user/password-based credentials.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a596d-235">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="a596d-235">Next steps</span></span>

- [<span data-ttu-id="a596d-236">Utilizar o portal para criar uma aplicação e um principal de serviço do Azure AD que possam aceder aos recursos</span><span class="sxs-lookup"><span data-stu-id="a596d-236">Use the portal to create an Azure AD application and service principal that can access resources</span></span>](/azure/active-directory/develop/howto-create-service-principal-portal)
- [<span data-ttu-id="a596d-237">Registar uma aplicação na plataforma de identidade da Microsoft</span><span class="sxs-lookup"><span data-stu-id="a596d-237">Register an application with the Microsoft identity platform</span></span>](/graph/auth-register-app-v2)
- [<span data-ttu-id="a596d-238">Configurar uma aplicação do cliente para aceder a uma API web</span><span class="sxs-lookup"><span data-stu-id="a596d-238">Configure a client application to access a web API</span></span>](/azure/active-directory/develop/quickstart-configure-app-access-web-apis)
